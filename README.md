# Phirise

## Description

Convert related CSV set of mutations that can be used to send data to a Graphql service.  The inverse, reading from Graphql service to set of CSV outputs is a future goal.  No user interface provided, see related projects for React 16+ and Angular 6+ user interface components.  Simple examples are provided in Apollo Client for React and Angular.

## Map Specification - Transform Template

Specifies The Mapping from input values in multiple CSV inputs to values in a graphql service.

## Postgraphile First

Initial implementation uses the schema generated by [Postgraphile](https://www.graphile.org/postgraphile/"Instant GraphQL API for PostgreSQL database").  

Additional implementations can be added by the user.

## Using Introspection to Make Life Easier

Example Queries:

### Get Type Information for a Specific Type

```
{
  __type(name: "StationaryAcousticValue") {
    kind
    name
    description
    fields {
      name
      description
      type {
        kind
        name
      }
      args {
        name
        description
      }
    }
  }
}
```


### Get a Schema

```
 {__schema {
   queryType {
     name
   }
}}
```
## Creating and Updating Values

### Create Value

#### Survey

```
mutation CreateSurvey($survey: CreateSurveyInput! ){
  createSurvey(input: $survey) {
    survey {
      id
    }
  }
}
```

Query Param:

```
{
  "survey": {
    "survey": {
      "projectId": -1,
      "startDate": "2017-06-28",
      "grtsId": 18
    }
  }
}
```

#### AcousticEvent



#### ClutterType

```
mutation CreateClutterType($ct: CreateClutterTypeInput! ){
  createClutterType(input: $ct) {
    clutterType {
      description
    }
  }
}
```

Query Param:

```
{
  "ct": {
    "clutterType": {
      "description": "Building"
    }
  }
}
```



### Update Value

#### ClutterType

```
  mutation UpdateClutterTypeDescription($ctd: UpdateClutterTypeInput!) {
  updateClutterType(input: $ctd) {
    clutterType {
      description
    }
  }
}
```

Query Param:

```
{
  "ctd": {
    "id": "WyJjbHV0dGVyX3R5cGVzIiwxXQ==",
    "clutterTypePatch": {
      "description": "Water"
    }

  }
}
```
